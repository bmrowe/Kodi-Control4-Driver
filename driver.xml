<devicedata>
  <copyright>Copyright 2024 Bryan Rowe. All rights reserved.</copyright>
  <creator>Bryan Rowe</creator>
  <manufacturer>Bryan Rowe</manufacturer>
  <name>Kodi IP Control</name>
  <model>Kodi v21+</model>
  <created>12/28/2024 12:00 PM</created>
  <modified>01/15/2026 9:30 PM</modified>
  <version>21</version>
  <control>lua_gen</control>
  <controlmethod>ip</controlmethod>
  <driver>DriverWorks</driver>
  <small>icons/device_sm.png</small>
  <large>icons/device_lg.png</large>
  <categories>
    <category>Audio/Video</category>
  </categories>
  <proxies>
    <proxy>media_player</proxy>
  </proxies>
  <connections>
    <connection>
      <id>5001</id>
      <type>2</type>
      <connectionname>Media Player</connectionname>
      <consumer>False</consumer>
      <linelevel>False</linelevel>
      <classes>
        <class>
          <classname>MEDIA_PLAYER</classname>
        </class>
      </classes>
    </connection>
    <connection>
      <id>2000</id>
      <type>5</type>
      <connectionname>HDMI</connectionname>
      <consumer>False</consumer>
      <linelevel>True</linelevel>
      <classes>
        <class>
          <classname>HDMI</classname>
        </class>
      </classes>
    </connection>
  </connections>
  <config>
    <documentation>
# Kodi Control4 Driver

This driver provides IP control for Kodi v21+ (Omega) using WebSocket JSON-RPC.

## Setup

1. In Kodi, go to Settings → Services → Control
2. Enable "Allow remote control via HTTP"
3. Enable "Allow remote control from applications on other systems"
4. In Control4 Composer, enter your Kodi device's IP address

## Features

- Real-time playback state monitoring via WebSocket
- Full media player control (play, pause, stop, seek)
- Directional navigation
- Configurable program buttons for OSD, subtitles, codec info, etc.
- Automatic player ID detection

## Notes

- WebSocket connects on port 9090 (Kodi default)
- Player ID is automatically detected from Kodi events
- No polling required - event-driven updates
    </documentation>
    <script file="driver.lua"/>
    <properties>
      <property>
        <name>IP Address</name>
        <type>STRING</type>
        <default></default>
      </property>
      <property>
        <name>Skip Interval (seconds)</name>
        <type>RANGED_INTEGER</type>
        <minimum>5</minimum>
        <maximum>600</maximum>
        <default>30</default>
      </property>
      <property>
        <name>Program A Button (Red)</name>
        <type>LIST</type>
        <default>Show Codec Info</default>
        <items>
          <item>Show Codec Info</item>
          <item>Show OSD</item>
          <item>Show Player Process Info</item>
          <item>Toggle Subtitles</item>
          <item>Next Subtitle</item>
          <item>Next Audio Track</item>
          <item>Screenshot</item>
        </items>
      </property>
      <property>
        <name>Program B Button (Green)</name>
        <type>LIST</type>
        <default>Toggle Subtitles</default>
        <items>
          <item>Show Codec Info</item>
          <item>Show OSD</item>
          <item>Show Player Process Info</item>
          <item>Toggle Subtitles</item>
          <item>Next Subtitle</item>
          <item>Next Audio Track</item>
          <item>Screenshot</item>
        </items>
      </property>
      <property>
        <name>Program C Button (Yellow)</name>
        <type>LIST</type>
        <default>Next Audio Track</default>
        <items>
          <item>Show Codec Info</item>
          <item>Show OSD</item>
          <item>Show Player Process Info</item>
          <item>Toggle Subtitles</item>
          <item>Next Subtitle</item>
          <item>Next Audio Track</item>
          <item>Screenshot</item>
        </items>
      </property>
      <property>
        <name>Program D Button (Blue)</name>
        <type>LIST</type>
        <default>Screenshot</default>
        <items>
          <item>Show Codec Info</item>
          <item>Show OSD</item>
          <item>Show Player Process Info</item>
          <item>Toggle Subtitles</item>
          <item>Next Subtitle</item>
          <item>Next Audio Track</item>
          <item>Screenshot</item>
        </items>
      </property>
      <property>
        <name>Debug Mode</name>
        <type>LIST</type>
        <default>OFF</default>
        <items>
          <item>OFF</item>
          <item>ON</item>
        </items>
      </property>
      <property>
        <name>Player State</name>
        <type>STRING</type>
        <readonly>true</readonly>
        <default>Stopped</default>
      </property>
      <property>
        <name>Media Type</name>
        <type>STRING</type>
        <readonly>true</readonly>
        <default>-</default>
      </property>
      <property>
        <name>Video Resolution</name>
        <type>STRING</type>
        <readonly>true</readonly>
        <default>-</default>
      </property>
      <property>
        <name>Video Aspect Ratio</name>
        <type>STRING</type>
        <readonly>true</readonly>
        <default>-</default>
      </property>
    </properties>
  </config>
</devicedata>
